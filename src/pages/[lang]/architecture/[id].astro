---
import type { Lang } from '../../../lib/i18n/i18n';
import { LANGS } from '../../../lib/i18n/i18n';
import { getCollection, getEntryBySlug } from 'astro:content';

import DetailPage from '../../../components/detail/DetailPage.astro';

export async function getStaticPaths() {
  const entries = await getCollection('architecture');
  return LANGS.flatMap((lang) =>
    entries.map((entry) => ({
      params: { lang, id: entry.slug }
    }))
  );
}

const { lang, id } = Astro.params as { lang: Lang; id: string };

const entry = await getEntryBySlug('architecture', id);
if (!entry) throw new Error(`Architecture entry not found: ${id}`);
---

<DetailPage
  lang={lang}
  collection="architecture"
  entry={entry}
  backHref={`/${lang}/architecture`}
  backLabel="Back to architecture"
  pageTitleSuffix="Architecture"
/>
