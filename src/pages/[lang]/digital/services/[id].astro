---
import type { Lang } from '../../../../lib/i18n/i18n';
import { LANGS } from '../../../../lib/i18n/i18n';
import { getCollection, getEntryBySlug } from 'astro:content';

import DetailPage from '../../../../components/detail/DetailPage.astro';

export async function getStaticPaths() {
  const entries = await getCollection('services');
  return LANGS.flatMap((lang) =>
    entries.map((entry) => ({
      params: { lang, id: entry.slug }
    }))
  );
}

const { lang, id } = Astro.params as { lang: Lang; id: string };

const entry = await getEntryBySlug('services', id);
if (!entry) throw new Error(`Service entry not found: ${id}`);
---

<DetailPage
  lang={lang}
  collection="services"
  entry={entry}
  backHref={`/${lang}/digital/services`}
  backLabel={lang === 'es' ? 'Volver a digital · servicios' : 'Back to digital · services'}
  pageTitleSuffix={lang === 'es' ? 'Digital servicios' : 'Digital services'}
/>
