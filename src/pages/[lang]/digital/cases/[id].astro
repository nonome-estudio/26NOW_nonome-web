---
import type { Lang } from '../../../../lib/i18n/i18n';
import { LANGS } from '../../../../lib/i18n/i18n';
import { getCollection, getEntryBySlug } from 'astro:content';

import DetailPage from '../../../../components/detail/DetailPage.astro';

export async function getStaticPaths() {
  const entries = await getCollection('cases');
  return LANGS.flatMap((lang) =>
    entries.map((entry) => ({
      params: { lang, id: entry.slug }
    }))
  );
}

const { lang, id } = Astro.params as { lang: Lang; id: string };

const entry = await getEntryBySlug('cases', id);
if (!entry) throw new Error(`Case entry not found: ${id}`);
---

<DetailPage
  lang={lang}
  collection="cases"
  entry={entry}
  backHref={`/${lang}/digital/cases`}
  backLabel={lang === 'es' ? 'Volver a digital · casos' : 'Back to digital · cases'}
  pageTitleSuffix={lang === 'es' ? 'Digital casos' : 'Digital cases'}
/>
